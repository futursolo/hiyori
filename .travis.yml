sudo: false

matrix:
  allow_failures:
    - python: nightly

  include:
    - os: linux
      python: 3.6.1
      env: PYVER=3.6

    - os: linux
      python: 3.6.2
      env: PYVER=3.6

    - os: linux
      python: 3.6.3
      env: PYVER=3.6

    - os: linux
      python: 3.6.4
      env: PYVER=3.6

    - os: linux
      python: 3.6.5
      env: PYVER=3.6

    - os: linux
      python: 3.6
      env: PYVER=3.6

    - os: linux
      python: nightly
      env: PYVER=3.7

language: python

install:
  - pip install -U pip setuptools
  - pip install .[test]

  - pip install -U coveralls

# commands to run tests
script:
  - mypy --python-version $PYVER --strict --ignore-missing-imports --show-error-context --show-traceback -p hiyori
  - flake8 .
  - coverage run --source=hiyori setup.py test

after_success:
  - coveralls
